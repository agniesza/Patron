@using Microsoft.AspNet.Identity
@model Patron.Models.Patron

@{
    ViewBag.Title = Model.FirstName+" "+Model.LastName;
}
<div class="title">
    <h2 style="text-align: center;">
        @Html.DisplayFor(model => model.FirstName)
        @Html.DisplayFor(model => model.LastName)
    </h2>
    <h4 style="text-align: center; color: lime">wspiera talenty</h4>
</div>
<div class="row">
    <div class="leftcolumn">
        <div>

       
            <div style="text-align:center">
                <img src="~/Avatars/@ViewBag.Avt" alt="" height="170px" width="150px" />
            </div>
            
                <p>
                    @Html.DisplayFor(model => model.UserName)
                </p>
           

            <h4>Suma wpłat:  @Html.DisplayFor(model => model.TotalMoney)</h4>

        </div>
    </div>
    <div class="rightcolumn">
        @if (@ViewBag.CountActiveSub > 0)
        {
            <dt>
                Aktywne subskrupcje:
                @ViewBag.CountActiveSub
            </dt>

            <dd>
                @foreach (var asub in @ViewBag.ActiveSubscriptions)
                {

                    @(asub.Value)
                    @(asub.Name)
                    @(asub.Author.FirstName)
                    @(asub.Author.LastName)
                    <a href="https://localhost:44321/Authors/Details/@(asub.Author.ID)">@(asub.Author.LastName)</a>
                }
            </dd>
        }
        else
        {
            if (@User.Identity.GetUserName() == @Model.UserName)
            {
                <p>W tej chwili nie wspierasz żadnych twórców.</p>
            }
            else
            {
                @Model.FirstName <span>nie wspiera obecnie żadnych twórców.</span>
            }
        }




        @if (@ViewBag.CountInActiveSub > 0)
        {
            <dt>
                Niektywne subskrupcje:

            </dt>
            <dd>
                @foreach (var nsub in @ViewBag.InActiveSub)
                {

                    @(nsub.FirstName)
                    @(nsub.LastName)

                }
            </dd>
        }
        @if (@ViewBag.OneTimeSupportCount > 0)
        {
            <dt>Jednorazowo udzielone wsparcie:</dt>
            <dd>
                @foreach (var oneTime in @ViewBag.OneTimeSupport)
                {
                    @(oneTime.Value)
                    @(oneTime.Author.FirstName)

                }
            </dd>
        }
        @if (@User.Identity.GetUserName() == @Model.UserName)
        {
            @Html.ActionLink("Edytuj profil", "EditProfile", new { id = Model.ID })
           <br />
            <a href="https://localhost:44321/Payments/PatronsPayments/@(Model.ID)">Twoje płatności</a>
            <br />
            <a href="https://localhost:44321/CreditCards/Details/@(Model.CreditCard.ID)">Twoja karta</a>

        }

    </div>
</div>
<p>

</p>
